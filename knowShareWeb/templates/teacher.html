{% extends "base.html" %}
{% block title %}선생님 소개{% endblock %}
{% block css %}
.teacherInfo{ margin: 0 20px 0 0;}
{% endblock %}
{% block javascript %}
        function enterLectureRoom()
        {
            if(document.LectureRoom.username.value == "")
            {
                alert('닉네임을 입력하지 않으셨습니다.');
                return;
            }
            document.LectureRoom.submit();
        }

        function showProfile(name, highschool, university, age, sex, career, money, tutorTime, tutorType) 
        {
            $("#profileTitle").text(name + " 선생님");
            $("#profileHighschool").text("고등학교 : " + highschool);
            $("#profileUniversity").text("대학교 : " + university);
            $("#profileAge").text("나이 : " + age);
            if(sex == 0)
                 $("#profileSex").text("성 : 남성");
            else 
                 $("#profileSex").text("성 : 여성");
            var careers = career.split("</br>")     
            for(i = 0 ; i < careers.length; i++)
            {
              var careerText = $("<label>").text(careers[i]);
 //             careerText.appendTo($(".profileDetail");
             $("#career").append(careerText);
	    }
            $("#profileMoney").text("과외비용 : " + money + "만원");
            if(tutorTime == 0)
                 $("#profileTutorTime").text("과외방식 : 주 1회 1시간");
            else if(tutorTime == 1)
                 $("#profileTutorTime").text("과외방식 : 주 2회 1시간");
            else if(tutorTime == 2)
                 $("#profileTutorTime").text("과외방식 : 주 1회 2시간");
            else if(tutorTime == 3)
                 $("#profileTutorTime").text("과외방식 : 주 2회 2시간");
            else if(tutorTime == 4)
                 $("#profileTutorTime").text("과외방식 : 기타");

            if(tutorType == 0)
                 $("#profileTutorType").text("과외방법 : 1 - 1 수업");
            else if(tutorType == 1)
                 $("#profileTutorType").text("과외방법 : 1 - 2 수업");
            else if(tutorType == 2)
                 $("#profileTutorType").text("과외방법 : 1 - 3 수업");

            $("#profileModal").modal('show')
       }
        function teacherRequest(teacherID)
        {
	     var csrftoken = getCookie('csrftoken');
             var csrfInput = $('<input>').attr("type", "hidden").attr("name", "csrfmiddlewaretoken").val(csrftoken);
             var teacherIDInput = $('<input>').attr("type", "hidden").attr("name", "teacherID").val(teacherID);
             $form = $('<form method="POST" action="/teacherRequest/"></form>');         
	     $form.append(csrfInput)			    
             $form.append(teacherIDInput)
             $form.submit();					    
        }

{% endblock %}        
{% block mainnav %}
{% endblock %}
{% block content %}    
<div class="row-fluid">
  {% for teacher in teachers %}
  <ul class="thumbnails">
    <li class="span4 {% if forloop.counter|divisibleby:"3" %} {% else %}teacherInfo{% endif %}">
      <div class="thumbnail">
        <div class="caption">
          <h3>{{teacher.name}} 선생님</h3>
          <p>
	    대학교 : {{teacher.university}}<br>
            나이 : {{teacher.age}}<br>
	    성 : {% if teacher.sex == 0 %} 남성 {% else %} 여성 {% endif %}
            <br>
            <br>
          </p>
          <p>
	    <a href="javascript:showProfile('{{teacher.name}}', '{{teacher.highschool}}', '{{teacher.university}}', '{{teacher.age}}', '{{teacher.sex}}', '{{teacher.career}}', '{{teacher.money}}', '{{teacher.tutorTime}}', '{{teacher.tutorType}}')" class="btn">상세 프로필</a>
	    <a href="javascript:teacherRequest('{{teacher.id}}')" class="btn btn-info">수강 신청</a>
	  </p>
        </div>
      </div>
    </li>
    {% endfor %} 
</div>

<div class="footer">
  <p>&copy; KnowledgeShare 2013</p>
</div>

<!-- Profile Modal -->
<div id="profileModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="profileTitle"></h3>
  </div>
  <div class="modal-body">
    <label id="profileAge"></label>
    <label id="profileSex"></label>
    </br>
    <label id="profileHighschool"></label>
    <label id="profileUniversity"></label>
    <div id="career">
      <label id="profileCareer">경력 :</label>
    </div>
    </br>
    <label id="profileMoney"></label>
    <label id="profileTutorTime"></label>
    <label id="profileTutorType"></label>
  </div>
  <div class="modal-footer">
    {% if user.username %}
    <button class="btn" data-dismiss="modal" aria-hidden="true">닫기</button>
    <button class="btn btn-primary" onClick="javascript:enterLectureRoom();">강의실 입장</button>  
    {% else %}
	  
    {% endif %}
  </div>    
</div>

<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">이재훈 선생님 강의실 입장</h3>
  </div>
  <div class="modal-body">
    {% if user.username %}
    {% if isInGroup %}
    <p class="enter">강의실에서 쓰실 닉네임을 쓰시고 입장해주세요</p>
    <FORM NAME="LectureRoom" METHOD="GET" onSubmit="return checkform(this);" action="http://1.226.82.11/demo/demo1.jsp">
      <input type="text" id="username" required autofocus name="username" size="29" class="field" />
      <input TYPE="hidden" NAME="action" VALUE="create">
    </form>
	{% else %}
    <p class="enter"> 강의실에 입장할 수 있는 권한이 없습니다. </p>
    {% endif %}
    {% else %}
    <p class="enter">먼저 로그인을 해주시기 바랍니다.</p>
    {% endif %}
  </div>
  <div class="modal-footer">
    {% if user.username %}
    <button class="btn" data-dismiss="modal" aria-hidden="true">닫기</button>
    <button class="btn btn-primary" onClick="javascript:enterLectureRoom();">강의실 입장</button>  
    {% else %}
	  
    {% endif %}
  </div>    
</div>
{% endblock %}    
